.rules_changes: &changes
  changes:
    - "**/*.java"
    - "build.gradle.kts"
    - "gradle.properties.kts"
    - "src/**/*"

.rules_feature_fix: &rules_feature_fix
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: never
    - if: '$CI_COMMIT_BRANCH =~ /^(feat|fix|hotfix)\/.+/'
      <<: *changes
      when: always
    - when: never

.rules_main_dev: &rules_main_dev
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: never
    - if: '$CI_COMMIT_BRANCH == "main" || $CI_COMMIT_BRANCH == "dev"'
      <<: *changes
      when: always
    - when: never

.rules_main_only: &rules_main_only
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: never
    - if: '$CI_COMMIT_BRANCH == "main"'
      <<: *changes
      when: on_success
    - when: never

.rules_dev_only: &rules_dev_only
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: never
    - if: '$CI_COMMIT_BRANCH == "dev"'
      <<: *changes
      when: on_success
    - when: never

.rules_schedule_only: &rules_schedule_only
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: always
    - when: never